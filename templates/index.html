<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Pierre • Feuille • Ciseaux — Web</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <div class="bg"></div>
  <main class="wrap">
    <header class="header">
      <h1>🪦🧻✂️ Pierre • Feuille • Ciseaux</h1>
      <p class="soustitre">Interface web simple, logique Python existante</p>
    </header>

    <section class="carte verre">
      <p class="hint">Choisissez une option :</p>
      <form class="boutons" method="post" action="{{ url_for('play') }}">
        <button class="btn" type="submit" name="choix" value="pierre" {% if termine %}disabled{% endif %}>🪦 Pierre</button>
        <button class="btn" type="submit" name="choix" value="feuille" {% if termine %}disabled{% endif %}>🧻 Feuille</button>
        <button class="btn" type="submit" name="choix" value="ciseaux" {% if termine %}disabled{% endif %}>✂️ Ciseaux</button>
      </form>

      {% set final_class = 'win' if last_resultat == 'gagne' else 'lose' if last_resultat == 'perd' else 'draw' if last_resultat == 'egalite' else '' %}
      {% set final_text = '✅ Vous avez gagné !' if last_resultat == 'gagne' else '❌ Vous avez perdu.' if last_resultat == 'perd' else '🤝 Égalité.' if last_resultat == 'egalite' else 'Cliquez pour jouer !' %}

      <div class="resultats">
        <div class="ligne"><span>Vous :</span><strong>{{ last_joueur or '–' }}</strong></div>
        <div class="ligne"><span>Ordinateur :</span><strong>{{ last_ordi or '–' }}</strong></div>
        <div class="ligne final {{ final_class }}">{{ final_text }}</div>
      </div>

      <div class="scores">
        <div class="score">Vous <span>{{ score_joueur }}</span></div>
        <div class="score">Égalités <span>{{ egalites }}</span></div>
        <div class="score">Ordi <span>{{ score_ordi }}</span></div>
      </div>

      <div class="actions">
        <form method="post" action="{{ url_for('reset') }}">
          <button class="btn secondaire" type="submit">🔁 Réinitialiser</button>
        </form>
        <form method="post" action="{{ url_for('toggle_regles') }}">
          <button class="btn secondaire" type="submit">📖 Règles</button>
        </form>
      </div>

      {% if regles %}
      <pre class="regles verre">{{ regles }}</pre>
      {% endif %}
    </section>

    <footer class="footer">
      <small>Règle “premier à 3 points” côté serveur. Pas de JavaScript.</small>
    </footer>
  </main>
</body>
</html>
